#
# usage: cov <package> <logfile-prefix>
# examples:
#		cov . gohg
#		cov gohg gohg
#

echo === Deleting existing logfiles...
if [ -f $2-coverage.json ]
then
  rm $2-coverage.json
fi
if [ -f $2-coverage.log ]
then
  rm $2-coverage.log
fi
if [ -f $2-coverage-annotate.log ]
then
  rm $2-coverage-annotate.log
fi
echo === Gathering coverage info...
gocov test $1 > $2-coverage.json
echo === Creating logfile...
gocov report $2-coverage.json > $2-coverage.log
echo === Annotating functions...
gocov annotate $2-coverage.json .* > $2-coverage-annotate.log
echo "=== Done!"

